# Product Context: PostgreSQL MCP Server

## なぜこのプロジェクトが存在するのか
AIアシスタントがデータベースと直接対話する必要性が高まっていますが、現在のAIシステムはデータベース操作において以下の課題があります：
- データベース接続情報の安全な管理
- SQLクエリの実行と結果の適切な処理
- 複雑なデータベース操作の抽象化
- エラーハンドリングとセキュリティ対策
- **データベース環境の自動構築と管理**
- **高度なデータ分析と品質改善の実現**

このMCPサーバーは、AIアシスタントがPostgreSQLデータベースに対して安全かつ効率的に操作を行えるようにするだけでなく、以下の高度な機能を提供します：
- **Dockerによる自動環境構築**: ゼロコンフィグでのPostgreSQL環境セットアップ
- **MCP Sampling連携**: LLMによるインテリジェントなデータ分析と品質改善
- **包括的なスキーマ管理**: テーブル設計から正規化まで包括的にサポート

## 解決する問題
1. **安全なデータベースアクセス**
   - AIアシスタントが直接データベース接続情報を持つ必要がない
   - 適切な権限制御とセキュリティ対策の実装

2. **効率的なデータ操作と分析**
   - 複雑なSQLクエリの実行サポート
   - データの取得、更新、削除操作の標準化
   - トランザクション管理の提供
   - **MCP Samplingによる高度なデータ分析**
   - **自動正規化とデータ品質改善**

3. **環境構築の自動化**
   - **DockerによるPostgreSQL環境の自動セットアップ**
   - ゼロコンフィグでの開発環境構築
   - 環境依存性の解消

4. **開発者の負担軽減**
   - 設定が容易で運用がシンプル
   - 拡張性の高いアーキテクチャ

## どのように動作するべきか
1. **環境自動構築**
   - **Dockerコンテナの自動起動と管理**
   - 環境変数による柔軟な設定
   - コンテナ状態の自動監視とヘルスチェック

2. **接続管理**
   - 環境変数または設定ファイルから接続情報を読み込み
   - 接続プーリングによる効率的なリソース管理
   - 安全な認証と暗号化通信

3. **操作提供**
   - **基本データ操作**: CRUD操作、クエリ実行、トランザクション管理
   - **スキーマ管理**: テーブル作成、変更、削除、スキーマ情報取得
   - **MCP Sampling分析**: LLM連携による正規化、データ品質評価、スキーマ最適化
   - **データベースメタデータ**: 包括的なデータベース情報取得

4. **エラーハンドリング**
   - 適切なエラーメッセージの提供
   - SQLインジェクション対策
   - 接続エラー時のリカバリ
   - **コンテナ管理エラーの適切な処理**

## ユーザー体験目標
- **AIアシスタント**: データベース操作を自然言語で指示できる
- **開発者**: 簡単な設定でMCPサーバーを利用可能
- **運用者**: 安定した動作と適切なロギング

## ユースケース
1. **データ分析支援**
   - AIがデータベースから直接データを取得して分析
   - 複雑なクエリの生成と実行
   - **MCP Samplingによる高度なデータ分析と可視化**

2. **データ品質改善**
   - **自動正規化によるデータ構造の最適化**
   - **データ品質評価と改善計画の生成**
   - **スキーマ最適化によるパフォーマンス向上**

3. **環境自動構築**
   - **DockerによるPostgreSQL環境の即時セットアップ**
   - **開発環境の迅速な構築とテスト**
   - **環境依存性のない開発体験**

4. **データ管理**
   - 定期的なデータ更新やクリーニング
   - バッチ処理の実行
   - **安全なスキーマ変更とバージョン管理**

5. **システム監視**
   - データベースの状態確認
   - パフォーマンスメトリクスの取得
   - **データ品質の継続的監視**

## 成功指標
- 安全なデータベース操作が可能であること
- 安定した接続とパフォーマンス
- 簡単な設定と運用
- 拡張性の高いアーキテクチャ
